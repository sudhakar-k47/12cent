import{j as C,Z as q,b as r,T as B,m as D,D as H,z as L,r as c,c as N,w as g,W as k,o as d,a as i,f as t,l as M,X as V,d as u,g as U,t as n,e as b,F as E,k as T}from"./app-03428bbd.js";import{L as j}from"./main-2c5df3eb.js";import{P as A}from"./page-header-3604d849.js";import{s as I}from"./default-5effbc81.js";import{_ as O}from"./_plugin-vue_export-helper-c27b6911.js";import"./logo-light-8edeeccf.js";const Q={components:{Layout:j,PageHeader:A,Link:C,Head:q,Multiselect:I},computed:{StatusOptions(){return[{label:"Pending",value:"pending"},{label:"Answered",value:"answered"}]}},setup(m){const o=r(""),y=r(10),s=r(1),w=r(0),_=r({}),f=r(!1),v=r(null),p=r([]),l=B({comment:"",status:""}),x=e=>{f.value=!0,v.value=e,l.comment=e.comment,l.status=e.status},P=D(()=>{var e;try{return JSON.parse(((e=m.property)==null?void 0:e.images)||"[]")}catch{return[]}}),h=async()=>{try{const e=await k.get("/enquiries/fetchdata",{params:{page:s.value,perPage:y.value}});p.value=e.data.enquiries.data,_.value=e.data.enquiries,w.value=e.data.enquiries.total}catch(e){console.log(e)}},S=async()=>{var e;if(l.errors={},!l.status){l.errors.status="Please select the Status";return}try{(await k.put(`/enquiries/${(e=v.value)==null?void 0:e.id}`,l)).status==200&&(h(),f.value=!1)}catch(a){console.log(a)}};return H(h),L(s,()=>{h()}),{currentPage:s,rows:w,perPage:y,searchQuery:o,enquiries:p,fetchData:h,images:P,commentModal:f,openCommentModal:x,form:l,handleSubmit:S}},methods:{ucfirst(m){return m?m.charAt(0).toUpperCase()+m.slice(1):""}}},F={class:"row"},R={class:"col-lg-12"},z={class:"card"},J={class:"card-header align-items-center d-flex"},W={class:"d-flex gap-3"},X={class:"card-body"},Z={class:"listjs-table"},G={class:"table-responsive table-card mt-3 mb-1"},K={class:"table align-middle table-hover step-row"},Y=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"#"),t("th",null,"Name"),t("th",null,"Email"),t("th",null,"Phone"),t("th",null,"Message"),t("th",null,"Status")])],-1),$={class:"list form-check-all"},ee=["onClick"],te={key:0,class:"bg-warning-subtle badge fs-6 text-warning"},se={key:1,class:"bg-success-subtle badge fs-6 text-success"},oe={key:2,class:"bg-danger-subtle badge fs-6 text-danger"},ae={key:0},ne=t("h5",{class:"text-center mt-4"},"No results found",-1),le=[ne],re={class:"d-flex align-items-center justify-content-between"},ce={class:"mb-0"},de={class:"mb-3"},ie=t("label",{class:"form-label"},"Comment:",-1),ue={class:"mb-3"},me=t("label",{class:"form-label"},"Status:",-1),_e={key:0,class:"text-danger"},he=t("div",{class:"text-end"},[t("button",{type:"submit",class:"btn btn-success"},"Submit")],-1);function fe(m,o,y,s,w,_){const f=c("Head"),v=c("PageHeader"),p=c("BCol"),l=c("b-pagination"),x=c("BRow"),P=c("Multiselect"),h=c("BModal"),S=c("Layout");return d(),N(S,null,{default:g(()=>[i(f,{title:"Enquiry Details"}),i(v,{title:"Enquiry Details",pageTitle:"Home"}),i(x,null,{default:g(()=>[i(p,{lg:"12"},{default:g(()=>[t("div",F,[t("div",R,[t("div",z,[t("div",J,[i(p,{lg:"6"},{default:g(()=>[t("div",W,[M(t("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>s.searchQuery=e),onInput:o[1]||(o[1]=(...e)=>s.fetchData&&s.fetchData(...e)),type:"text",class:"form-control",placeholder:"Search enquiries..."},null,544),[[V,s.searchQuery]])])]),_:1})]),t("div",X,[t("div",Z,[t("div",G,[t("table",K,[Y,t("tbody",$,[(d(!0),u(E,null,U(s.enquiries,(e,a)=>(d(),u("tr",{key:e.id,onClick:pe=>s.openCommentModal(e)},[t("td",null,n((s.currentPage-1)*s.perPage+a+1),1),t("td",null,n(e.name),1),t("td",null,n(e.email),1),t("td",null,n(e.phone),1),t("td",null,n(e.message),1),t("td",null,[e.status==="pending"?(d(),u("span",te,n(_.ucfirst(e.status)),1)):b("",!0),e.status==="answered"?(d(),u("span",se,n(_.ucfirst(e.status)),1)):b("",!0),e.status==="resolved"?(d(),u("span",oe,n(_.ucfirst(e.status)),1)):b("",!0)])],8,ee))),128))])]),s.enquiries.length==0?(d(),u("div",ae,le)):b("",!0)]),t("div",re,[t("p",ce,[t("b",null,"Total Items: "+n(s.rows),1)]),i(l,{modelValue:s.currentPage,"onUpdate:modelValue":o[2]||(o[2]=e=>s.currentPage=e),"total-rows":s.rows,"per-page":s.perPage},null,8,["modelValue","total-rows","per-page"])])])])])])])]),_:1})]),_:1}),i(h,{modelValue:s.commentModal,"onUpdate:modelValue":o[6]||(o[6]=e=>s.commentModal=e),"hide-footer":"",centered:"",title:"Add Comment"},{default:g(()=>{var e;return[t("form",{onSubmit:o[5]||(o[5]=T((...a)=>s.handleSubmit&&s.handleSubmit(...a),["prevent"]))},[t("div",de,[ie,M(t("textarea",{"onUpdate:modelValue":o[3]||(o[3]=a=>s.form.comment=a),class:"form-control",rows:"3",placeholder:"Enter your comment"},`
                    `,512),[[V,s.form.comment]])]),t("div",ue,[me,i(P,{modelValue:s.form.status,"onUpdate:modelValue":o[4]||(o[4]=a=>s.form.status=a),"close-on-select":!0,placeholder:"Select Status",searchable:"",options:_.StatusOptions},null,8,["modelValue","options"]),(e=s.form.errors)!=null&&e.status?(d(),u("p",_e,n(s.form.errors.status),1)):b("",!0)]),he],32)]}),_:1},8,["modelValue"])]),_:1})}const Pe=O(Q,[["render",fe]]);export{Pe as default};
