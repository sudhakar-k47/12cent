import{T as j,b as v,r as A,c as V,w as n,o as m,d as h,f as t,a as o,l as _,A as b,B as E,h as d,k as y,e as p,t as D,u as s,n as g,j as F,O}from"./app-03428bbd.js";import{_ as R}from"./FormSection-2a2e661f.js";import{_ as B}from"./InputError-24c156f8.js";import{_ as k}from"./InputLabel-fc505284.js";import{_ as C}from"./TextInput-2e8454ab.js";const T={key:0,class:"mb-3"},q={class:"mb-2"},z={class:"mb-2"},L=["src","alt"],M={class:"text-danger mt-2"},Y={class:"mb-3"},G={class:"mb-3"},H={key:0},J={class:"text-sm mt-2 text-muted"},K={class:"alert alert-success text-success"},Q={key:0,class:"alert alert-info mt-3"},se={__name:"UpdateProfileInformationForm",props:{user:Object},setup(i){const P=i,e=j({_method:"PUT",name:P.user.name,email:P.user.email,photo:null}),w=v(null),u=v(null),l=v(null),I=()=>{l.value&&(e.photo=l.value.files[0]),e.post(route("user-profile-information.update"),{errorBag:"updateProfileInformation",preserveScroll:!0,onSuccess:()=>S()})},N=()=>{w.value=!0},x=()=>{l.value.click()},U=()=>{const a=l.value.files[0];if(!a)return;const r=new FileReader;r.onload=c=>{u.value=c.target.result},r.readAsDataURL(a)},$=()=>{O.delete(route("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{u.value=null,S()}})},S=()=>{var a;(a=l.value)!=null&&a.value&&(l.value.value=null)};return(a,r)=>{const c=A("BButton");return m(),V(R,{onSubmitted:I,title:"Profile Information",description:"Update your account's profile information and email address."},{form:n(()=>[a.$page.props.jetstream.managesProfilePhotos?(m(),h("div",T,[t("div",q,[t("input",{ref_key:"photoInput",ref:l,type:"file",class:"d-none form-control",onChange:U},null,544),o(k,{for:"photo",value:"Photo"})]),t("div",z,[_(t("div",null,[t("img",{src:i.user.profile_photo_url,alt:i.user.name,class:"rounded-circle",width:"100"},null,8,L)],512),[[b,!u.value]]),_(t("div",null,[t("span",{class:"d-block rounded-circle w-25",style:E("background-image: url('"+u.value+"');")},null,4)],512),[[b,u.value]])]),o(c,{variant:"primary",class:"me-2 btn-sm",type:"button",onClick:y(x,["prevent"])},{default:n(()=>[d("Select A New Photo")]),_:1}),i.user.profile_photo_path?(m(),V(c,{key:0,variant:"danger",type:"button",class:"btn-sm",onClick:y($,["prevent"])},{default:n(()=>[d("Remove Photo")]),_:1})):p("",!0),t("div",M,[t("span",null,D(s(e).errors.photo),1)])])):p("",!0),t("div",Y,[o(k,{for:"name",value:"Name"}),o(C,{id:"name",modelValue:s(e).name,"onUpdate:modelValue":r[0]||(r[0]=f=>s(e).name=f),type:"text",required:"",autocomplete:"name",class:g({"is-invalid":s(e).errors.name})},null,8,["modelValue","class"]),o(B,{message:s(e).errors.name,class:"mt-2"},null,8,["message"])]),t("div",G,[o(k,{for:"email",value:"Email"}),o(C,{id:"email",modelValue:s(e).email,"onUpdate:modelValue":r[1]||(r[1]=f=>s(e).email=f),type:"email",required:"",autocomplete:"username",class:g({"is-invalid":s(e).errors.email})},null,8,["modelValue","class"]),o(B,{message:s(e).errors.email,class:"mt-2"},null,8,["message"]),a.$page.props.jetstream.hasEmailVerification&&i.user.email_verified_at===null?(m(),h("div",H,[t("p",J,[d(" Your email address is unverified. "),o(s(F),{href:a.route("verification.send"),method:"post",as:"button",class:"btn btn-sm btn-warning",onClick:y(N,["prevent"])},{default:n(()=>[d(" Click here to re-send the verification email. ")]),_:1},8,["href"])]),_(t("div",K," A new verification link has been sent to your email address. ",512),[[b,w.value]])])):p("",!0)])]),actions:n(()=>[o(c,{variant:"success w-100",type:"submit",class:g({"opacity-25":s(e).processing}),disabled:s(e).processing},{default:n(()=>[d("Save")]),_:1},8,["class","disabled"]),s(e).recentlySuccessful?(m(),h("p",Q,"Profile Saved.")):p("",!0)]),_:1})}}};export{se as default};
